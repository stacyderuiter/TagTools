<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Load tag data • tagtools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Load tag data">
<meta property="og:description" content="tagtools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tagtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="load-tag-data_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Load tag data</h1>
                        <h4 class="author">tagtools project team</h4>
            
            <h4 class="date">2021-07-28</h4>
      
      
      <div class="hidden name"><code>load-tag-data.Rmd</code></div>

    </div>

    
    
<p>Welcome to the load tag data vignette! On behalf of the team behind tagtools, thanks for taking some time to get to know our package. We hope it facilitates your work.</p>
<p>In this vignette, you will gain confidence with using the tagtools to create and load netCDF files, including editing metadata (important data about the data).</p>
<p><em>Estimated time for this vignette: about 20 minutes.</em></p>
<p>These vignettes assume that you have some basic experience working with R/Rstudio, and can execute provided code, making some user-specific changes along the way (e.g. to help R find a file you downloaded). We will provide you with quite a few lines. To boost your own learning, you would do well to try and write them before opening what we give, using this just to check your work. Additionally, be careful when copy-pasting special characters such as _underscores_, and ‘quotes’. If you get an error, one thing to check is that you have just single, simple underscores, and ‘straight quotes’, whether ‘single’ or “double” (rather than “smart quotes”).</p>
<div id="loading-an--nc-file" class="section level1">
<h1 class="hasAnchor">
<a href="#loading-an--nc-file" class="anchor"></a>Loading an .nc File</h1>
<div id="load-the-test-data-set" class="section level2">
<h2 class="hasAnchor">
<a href="#load-the-test-data-set" class="anchor"></a>Load the test data set</h2>
<p>For this example, you will load in the data file from a CATs tag. The data file is already stored in a .nc file called ‘cats_test_raw.nc’. This dataset is built into the <code>tagtools</code> package, so you can access it using <code>system.file</code>. Click Code at the right to see how.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">tagtools</span><span class="op">)</span> <span class="co"># always start with this</span>
<span class="va">cats_file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"cats_test_raw.nc"</span>, package <span class="op">=</span> <span class="st">"tagtools"</span>, mustWork <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">MN</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_nc.html">load_nc</a></span><span class="op">(</span><span class="va">cats_file_path</span><span class="op">)</span></code></pre></div>
<p>This especially concise two-line method should always work with the installation of <code>tagtools</code> that we support, for all eight built-in datasets that come with the package. We will make frequent use of this method in these vignettes. It is especially nice because it saves you some hassle (of tracking down where the dataset is saved and setting your working directory there, or of figuring out what your working directory is and moving your dataset there).</p>
<p><strong>However</strong>, it is worth your while to understand how to do these steps manually, though this requires its own separate mental task, because you will have to do this in the real world when you get your own data from somewhere else. You should keep track of what your working directory is for other reasons, too. So, familiarize yourself with the following commands:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>() <span class="co"># prints your current working directory. Often this will not be a tidy folder, but contain other things. So, to avoid that... </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Path/To/Tidy/Working/Directory/In/Quotes"</span>) <span class="co"># on Mac or Linux, paths look like this, with forward slashes between folders. For instance:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"/Library/Frameworks/R.framework/Versions/4.1/Resources/library/tagtools/extdata/"</span>) <span class="co"># depending on your system, this may set your working directory to the folder containing the built-in datasets</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:\Users\Sam Fynewever\Program Files"</span>) <span class="co"># on Windows, paths look like this, with a letter and colon at the beginning, then backslashes between folders</span></span></code></pre></div>
<p>Additionally, your working directory should be visible at the top of the console:</p>
<p><img src="../../../../../../Stacy%20DeRuiter/Dropbox/TagTools/R/tagtools/vignettes/working_dir.png" width="948"></p>
<p>Now, if you have navigated to your working directory in your file finder and/or ensured that the dataset file, <code>cats_test_raw.nc</code>, is located there (whether by changing your working directory or copy-pasting the file into your working directory), you can run load_nc “by hand”—see code:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">MN</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_nc.html">load_nc</a></span><span class="op">(</span><span class="st">"cats_test_raw"</span><span class="op">)</span> <span class="co"># no .nc required this way!</span></code></pre></div>
<p>All right! Whichever way you have just run <code>MN &lt;- load_nc(...)</code>, this creates an animaltag list object <code>MN</code> in your workspace. You can view it in the Environment tab if working in RStudio.</p>
<p><img src="../../../../../../Stacy%20DeRuiter/Dropbox/TagTools/R/tagtools/vignettes/MN_in_environment.png" width="485"></p>
<p>Or in the command line/console, type:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">MN</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">MN</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">MN</span><span class="op">$</span><span class="va">A</span><span class="op">)</span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#MN_struct">
Show/Hide Results
</button>
<div id="MN_struct" class="collapse">
<pre><code>#&gt; [1] "First the results for names(MN):"
#&gt; [1] "--------------------------------------------"
#&gt; [1] "Acc"   "Gyr"   "Depth" "Light" "info"
#&gt; [1] "Then the results for str(MN, max.level = 1):"
#&gt; [1] "--------------------------------------------"
#&gt; List of 5
#&gt;  $ Acc  :List of 19
#&gt;  $ Gyr  :List of 19
#&gt;  $ Depth:List of 19
#&gt;  $ Light:List of 19
#&gt;  $ info :List of 38
#&gt;  - attr(*, "class")= chr [1:2] "animaltag" "list"
#&gt; [1] "and finally the results for str(MN$A):"
#&gt; [1] "--------------------------------------------"
#&gt; List of 19
#&gt;  $ data              : num [1:720000, 1:3] -2.42 -2.4 -2.35 -2.3 -2.2 ...
#&gt;  $ sampling          : chr "regular"
#&gt;  $ sampling_rate     : num 0.00463
#&gt;  $ sampling_rate_unit: chr "Hz"
#&gt;  $ depid             : chr "cats_test"
#&gt;  $ creation_date     : chr "2019-12-07 13:26:03"
#&gt;  $ history           : chr "read_cats"
#&gt;  $ type              : chr "A"
#&gt;  $ full_name         : chr "Acceleration"
#&gt;  $ description       : chr "triaxial acceleration"
#&gt;  $ unit              : chr "m/s2"
#&gt;  $ unit_name         : chr "metres per second squared"
#&gt;  $ unit_label        : chr "m/s^2"
#&gt;  $ start_offset      : num 0
#&gt;  $ start_offset_units: chr "second"
#&gt;  $ column_name       : chr "x,y,z"
#&gt;  $ frame             : chr "tag"
#&gt;  $ axes              : chr "FRU"
#&gt;  $ files             : chr "20160730-091117-Froback-11-part"</code></pre>
</div>
<p>You should see that variables Acc, Gyr, Depth, Light, and info are contained within the list MN.</p>
</div>
</div>
<div id="explore-the-test-dataset" class="section level1">
<h1 class="hasAnchor">
<a href="#explore-the-test-dataset" class="anchor"></a>Explore the test dataset</h1>
<p>Now you can find out what each of the variables is by just typing their name followed by enter. For example, for info (tag-wide metadata), run</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">MN</span><span class="op">$</span><span class="va">info</span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#MN_info">
Show/Hide Results
</button>
<div id="MN_info" class="collapse">
<pre><code>#&gt; $depid
#&gt; [1] "cats_test"
#&gt; 
#&gt; $creation_date
#&gt; [1] "2019-12-07 13:36:15"
#&gt; 
#&gt; $data_source
#&gt; [1] "20160730-091117-Froback-11-part"
#&gt; 
#&gt; $data_nfiles
#&gt; [1] "1"
#&gt; 
#&gt; $data_format
#&gt; [1] "csv"
#&gt; 
#&gt; $device_make
#&gt; [1] "CATS"
#&gt; 
#&gt; $device_type
#&gt; [1] "Archival"
#&gt; 
#&gt; $dephist_device_tzone
#&gt; [1] "0"
#&gt; 
#&gt; $dephist_device_regset
#&gt; [1] "dd-mm-yyyy HH:MM:SS"
#&gt; 
#&gt; $dephist_device_datetime_start
#&gt; [1] "2016-07-27 16:29:38"
#&gt; 
#&gt; $sensors_list
#&gt; [1] "3 axis Accelerometer,3 axis Gyroscope,Temperature,Pressure,Light level,"
#&gt; 
#&gt; $animal_id
#&gt; [1] "Unknown"
#&gt; 
#&gt; $animal_species_common
#&gt; [1] "Humpback whale"
#&gt; 
#&gt; $animal_species_science
#&gt; [1] "Megaptera novaeangliae"
#&gt; 
#&gt; $dephist_deploy_datetime_start
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $dephist_deploy_locality
#&gt; [1] ""
#&gt; 
#&gt; $dephist_deploy_location_lat
#&gt; [1] ""
#&gt; 
#&gt; $dephist_deploy_location_lon
#&gt; [1] ""
#&gt; 
#&gt; $dephist_deploy_method
#&gt; [1] ""
#&gt; 
#&gt; $device_model
#&gt; [1] ""
#&gt; 
#&gt; $device_serial
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $device_url
#&gt; [1] "http://www.cats.is/"
#&gt; 
#&gt; $dtype_datetime_made
#&gt; [1] "2019-12-07 18:26:51"
#&gt; 
#&gt; $dtype_format
#&gt; [1] ".csv"
#&gt; 
#&gt; $dtype_nfiles
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $dtype_source
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $project_datetime_end
#&gt; [1] ""
#&gt; 
#&gt; $project_datetime_start
#&gt; [1] ""
#&gt; 
#&gt; $project_name
#&gt; [1] ""
#&gt; 
#&gt; $provider_cite
#&gt; [1] "Contact data provider"
#&gt; 
#&gt; $provider_details
#&gt; [1] "Stanford University"
#&gt; 
#&gt; $provider_doi
#&gt; [1] "Contact data provider"
#&gt; 
#&gt; $provider_email
#&gt; [1] "jergold@stanford.edu"
#&gt; 
#&gt; $provider_license
#&gt; [1] "Contact data provider"
#&gt; 
#&gt; $provider_name
#&gt; [1] "Jeremy Goldbogen"
#&gt; 
#&gt; $sensors_firm
#&gt; [1] "Not specified"
#&gt; 
#&gt; $sensors_soft
#&gt; [1] "Not specified"
#&gt; 
#&gt; $data_owner
#&gt; [1] "Jeremy Goldbogen, Dave Cade"</code></pre>
</div>
<p>The <code>info</code> structure tells you where the data came from, when it was collected, on what animal, and with what type of tag. info is the general metadata store for a dataset. You can find out what is in a specific field in info, e.g., to get the <code>sensors_list</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">sensors_list</span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#MN_info_sensors_list">
Show/Hide Results
</button>
<div id="MN_info_sensors_list" class="collapse">
<pre><code>#&gt; [1] "3 axis Accelerometer,3 axis Gyroscope,Temperature,Pressure,Light level,"</code></pre>
</div>
<div id="updating-and-adding-metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#updating-and-adding-metadata" class="anchor"></a>Updating and adding metadata</h2>
<p>There is a lot of metadata missing from this file! <code><a href="../reference/read_cats.html">read_cats()</a></code> can only auto-fill it with information that is standard for all CATS tags, or contained in the file itself. Other metadata must be added by the user.</p>
<p>For example, to add a field called ‘data_owner’ with value ‘Jeremy Goldbogen, Dave Cade’, you would enter:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">data_owner</span> <span class="op">&lt;-</span> <span class="st">'Jeremy Goldbogen, Dave Cade'</span>
<span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">data_owner</span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#MN_info_data_owner">
Show/Hide Results
</button>
<div id="MN_info_data_owner" class="collapse">
<pre><code>#&gt; [1] "Jeremy Goldbogen, Dave Cade"</code></pre>
</div>
<p>This is a way to add metadata to a dataset before sending it off to an archive (e.g., a dataset to accompany a journal paper). Although there are no rules for what you call each field, we are working toward establishing a set of best practices.</p>
<p>Entering metadata by hand by typing it into the R console is tedious, and also a recipe for inconsistencies. (Let’s avoid that!) To that end, we have tried to provide a couple of other options, considered below.</p>
</div>
<div id="saving-metadata-with-make_info" class="section level2">
<h2 class="hasAnchor">
<a href="#saving-metadata-with-make_info" class="anchor"></a>Saving Metadata with make_info</h2>
<p>You can use <code><a href="../reference/make_info.html">make_info()</a></code> to create a metadata info structure with information about the researcher, tag type, and study species. This function allows the user to generate a “skeleton” info structure for a tag deployment, with some common pieces of metadata filled in. Additional information can then be added manually or using a custom script before saving this info as part of a netCDF (.nc) file.</p>
<p>For example,</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">more_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_info.html">make_info</a></span><span class="op">(</span>depid <span class="op">=</span> <span class="st">'cats_test'</span>, tagtype <span class="op">=</span> <span class="st">'CATS'</span>, 
                       species <span class="op">=</span> <span class="st">'mn'</span>, owner <span class="op">=</span> <span class="st">'jg'</span><span class="op">)</span>
<span class="co"># results a few chunks later</span></code></pre></div>
<p>Note that you may need to add researchers, species, and perhaps tag types to the template files. To find out where these are stored on your machine, you can run:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'extdata'</span>, <span class="st">'researchers.csv'</span>, package<span class="op">=</span><span class="st">'tagtools'</span><span class="op">)</span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#system_file_researchers">
Show/Hide Results
</button>
<div id="system_file_researchers" class="collapse">
<pre><code>#&gt; [1] "C:/Users/Stacy DeRuiter/Documents/R/win-library/4.1/tagtools/extdata/researchers.csv"</code></pre>
</div>
<p>Then, navigate to the folder and make any edits that you would like. You may need to restart R before they will take effect.</p>
<p>Once you have succeeded in running <code><a href="../reference/make_info.html">make_info()</a></code>, you can view the results:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">more_info</span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#more_info">
Show/Hide Results
</button>
<div id="more_info" class="collapse">
<pre><code>#&gt; $animal_dbase_url
#&gt; [1] NA
#&gt; 
#&gt; $animal_id
#&gt; [1] "Unknown"
#&gt; 
#&gt; $animal_species_common
#&gt; [1] "Humpback whale"
#&gt; 
#&gt; $animal_species_science
#&gt; [1] "Megaptera novaeangliae"
#&gt; 
#&gt; $dephist_deploy_datetime_start
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $dephist_deploy_locality
#&gt; [1] ""
#&gt; 
#&gt; $dephist_deploy_location_lat
#&gt; [1] ""
#&gt; 
#&gt; $dephist_deploy_location_lon
#&gt; [1] ""
#&gt; 
#&gt; $dephist_deploy_method
#&gt; [1] ""
#&gt; 
#&gt; $dephist_device_datetime_start
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $dephist_device_regset
#&gt; [1] "dd/mm/yyyy HH:MM:SS"
#&gt; 
#&gt; $dephist_device_tzone
#&gt; [1] "0"
#&gt; 
#&gt; $depid
#&gt; [1] "cats_test"
#&gt; 
#&gt; $device_make
#&gt; [1] "CATS"
#&gt; 
#&gt; $device_model
#&gt; [1] ""
#&gt; 
#&gt; $device_serial
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $device_type
#&gt; [1] "Archival"
#&gt; 
#&gt; $device_url
#&gt; [1] "http://www.cats.is/"
#&gt; 
#&gt; $dtype_datetime_made
#&gt; [1] "2021-07-29 01:56:22"
#&gt; 
#&gt; $dtype_format
#&gt; [1] ".csv"
#&gt; 
#&gt; $dtype_nfiles
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $dtype_source
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $project_datetime_end
#&gt; [1] ""
#&gt; 
#&gt; $project_datetime_start
#&gt; [1] ""
#&gt; 
#&gt; $project_name
#&gt; [1] ""
#&gt; 
#&gt; $provider_cite
#&gt; [1] "Contact data provider"
#&gt; 
#&gt; $provider_details
#&gt; [1] "Stanford University"
#&gt; 
#&gt; $provider_doi
#&gt; [1] "Contact data provider"
#&gt; 
#&gt; $provider_email
#&gt; [1] "jergold@stanford.edu"
#&gt; 
#&gt; $provider_license
#&gt; [1] "Contact data provider"
#&gt; 
#&gt; $provider_name
#&gt; [1] "Jeremy Goldbogen"
#&gt; 
#&gt; $sensors_firm
#&gt; [1] "Not specified"
#&gt; 
#&gt; $sensors_list
#&gt; [1] "3axis Accelerometer,3 axis Magnetometer,3 axis Gyroscope,Pressure,Light,GPS,Video"
#&gt; 
#&gt; $sensors_soft
#&gt; [1] "Not specified"</code></pre>
</div>
</div>
<div id="combining-info-and-more_info" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-info-and-more_info" class="anchor"></a>Combining info and more_info</h2>
<p>Now we have two different info structures—the one we just created with <code><a href="../reference/make_info.html">make_info()</a></code> and the one we got when we created the .nc file using <code><a href="../reference/read_cats.html">read_cats()</a></code>.</p>
<p>We can combine the two together, keeping the fields from the original info if there are any duplicates:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">more_info</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">MN</span><span class="op">$</span><span class="va">info</span>
<span class="va">MN</span><span class="op">$</span><span class="va">info</span> <span class="op">&lt;-</span> <span class="va">more_info</span>
<span class="va">MN</span><span class="op">$</span><span class="va">info</span></code></pre></div>
<button class="btn btn-primary" data-toggle="collapse" data-target="#more_info2">
Show/Hide Results
</button>
<div id="more_info2" class="collapse">
<pre><code>#&gt; $animal_dbase_url
#&gt; [1] NA
#&gt; 
#&gt; $animal_id
#&gt; [1] "Unknown"
#&gt; 
#&gt; $animal_species_common
#&gt; [1] "Humpback whale"
#&gt; 
#&gt; $animal_species_science
#&gt; [1] "Megaptera novaeangliae"
#&gt; 
#&gt; $dephist_deploy_datetime_start
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $dephist_deploy_locality
#&gt; [1] ""
#&gt; 
#&gt; $dephist_deploy_location_lat
#&gt; [1] ""
#&gt; 
#&gt; $dephist_deploy_location_lon
#&gt; [1] ""
#&gt; 
#&gt; $dephist_deploy_method
#&gt; [1] ""
#&gt; 
#&gt; $dephist_device_datetime_start
#&gt; [1] "2016-07-27 16:29:38"
#&gt; 
#&gt; $dephist_device_regset
#&gt; [1] "dd-mm-yyyy HH:MM:SS"
#&gt; 
#&gt; $dephist_device_tzone
#&gt; [1] "0"
#&gt; 
#&gt; $depid
#&gt; [1] "cats_test"
#&gt; 
#&gt; $device_make
#&gt; [1] "CATS"
#&gt; 
#&gt; $device_model
#&gt; [1] ""
#&gt; 
#&gt; $device_serial
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $device_type
#&gt; [1] "Archival"
#&gt; 
#&gt; $device_url
#&gt; [1] "http://www.cats.is/"
#&gt; 
#&gt; $dtype_datetime_made
#&gt; [1] "2019-12-07 18:26:51"
#&gt; 
#&gt; $dtype_format
#&gt; [1] ".csv"
#&gt; 
#&gt; $dtype_nfiles
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $dtype_source
#&gt; [1] "UNKNOWN"
#&gt; 
#&gt; $project_datetime_end
#&gt; [1] ""
#&gt; 
#&gt; $project_datetime_start
#&gt; [1] ""
#&gt; 
#&gt; $project_name
#&gt; [1] ""
#&gt; 
#&gt; $provider_cite
#&gt; [1] "Contact data provider"
#&gt; 
#&gt; $provider_details
#&gt; [1] "Stanford University"
#&gt; 
#&gt; $provider_doi
#&gt; [1] "Contact data provider"
#&gt; 
#&gt; $provider_email
#&gt; [1] "jergold@stanford.edu"
#&gt; 
#&gt; $provider_license
#&gt; [1] "Contact data provider"
#&gt; 
#&gt; $provider_name
#&gt; [1] "Jeremy Goldbogen"
#&gt; 
#&gt; $sensors_firm
#&gt; [1] "Not specified"
#&gt; 
#&gt; $sensors_list
#&gt; [1] "3 axis Accelerometer,3 axis Gyroscope,Temperature,Pressure,Light level,"
#&gt; 
#&gt; $sensors_soft
#&gt; [1] "Not specified"
#&gt; 
#&gt; $creation_date
#&gt; [1] "2019-12-07 13:36:15"
#&gt; 
#&gt; $data_source
#&gt; [1] "20160730-091117-Froback-11-part"
#&gt; 
#&gt; $data_nfiles
#&gt; [1] "1"
#&gt; 
#&gt; $data_format
#&gt; [1] "csv"
#&gt; 
#&gt; $data_owner
#&gt; [1] "Jeremy Goldbogen, Dave Cade"</code></pre>
</div>
</div>
<div id="saving-metadata-with-a-gui-editor" class="section level2">
<h2 class="hasAnchor">
<a href="#saving-metadata-with-a-gui-editor" class="anchor"></a>Saving metadata with a GUI editor</h2>
<p>Another option for entering user-generated metadata is to use the animaltags metadata editor. This interface allows you to type your information into pre-named fields, allowing you to fully customize the information while also using standard field names.</p>
<p>To launch the editor, run:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/metadata_editor.html">metadata_editor</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>A web browser window will open in which you can fill in metadata fields for your tag.</p>
<p><img src="../../../../../../Stacy%20DeRuiter/Dropbox/TagTools/R/tagtools/vignettes/meta_editor.png" width="630"></p>
<p>Depending on your individual platform, this editor may not have any of the tabs open. Simply click on one of the tabs (Device Information, Tag and Animal Information, etc.) to open it.</p>
<p>Perhaps you don’t currently have metadata on hand to fill in the fields yourself. Or, at some point you might already have metadata stored in a CSV spreadsheet, <em>in the specific format that this reader recognizes</em> (it will not magically pick out metadata saved in a CSV in any order of your choosing). In either case, the function that reads metadata for you from a <code>.csv</code> file is useful. There should be a .csv spreadsheet with metadata in your workshop materials that you can use for now. Upload it with “Browse”, then click “Open from CSV” to harvest the data. This will automate the data entry process for you.</p>
<p>When you are done, scroll to the bottom of the editor, fill in a file name under which to save your work, and click “Save”.</p>
<p><em>Note that there are a number of fields which we strongly suggest filling out…you will get a warning if you try to save with these left blank.</em> You can choose where on your computer to save this (temporary) file, and it should confirm what the file name is.</p>
<p>Then, once this file is in your working directory, you can load the info into R as an animaltags info structure via:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">yet_more_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/csv2struct.html">csv2struct</a></span><span class="op">(</span><span class="st">'the_file_you_just_saved.csv'</span><span class="op">)</span>
<span class="co"># results not included, will depend on your individual file</span></code></pre></div>
<p>And finally, combine it with the rest as before. Try to emulate the two lines from above, changing the names as needed, without opening the chunk below. Then check your work against this:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">yet_more_info</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">MN</span><span class="op">$</span><span class="va">info</span>
<span class="va">MN</span><span class="op">$</span><span class="va">info</span> <span class="op">&lt;-</span> <span class="va">yet_more_info</span></code></pre></div>
</div>
</div>
<div id="saving-the-data" class="section level1">
<h1 class="hasAnchor">
<a href="#saving-the-data" class="anchor"></a>Saving the data</h1>
<p>We’ve now made quite a few additions to the metadata in the <code>info</code> structure, and we probably want to save those to our .nc file. Here’s how.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">MN</span><span class="op">$</span><span class="va">info</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
<span class="fu"><a href="../reference/add_nc.html">add_nc</a></span><span class="op">(</span><span class="st">'cats_test_raw'</span>, X <span class="op">=</span> <span class="va">MN</span><span class="op">$</span><span class="va">info</span>, vname <span class="op">=</span> <span class="st">'info'</span><span class="op">)</span> </code></pre></div>
<p>That’s it! If all has worked smoothly, your .nc file will contain all the additions we’ve been working on.</p>
</div>
<div id="review" class="section level1">
<h1 class="hasAnchor">
<a href="#review" class="anchor"></a>Review</h1>
<p>What have you learned so far? More important steps that will hopefully, as you’re working with data more frequently, become healthy routines of consistent, rigorous documentation.</p>
<p>Great work!</p>
<p><em>If you’d like to continue working through these practicals, <code>vectors-vs-structures</code> and <code>plots-and-cropping</code> are two good choices.</em></p>
<p><em><code>vectors-vs-structures</code> is a quick review of the way R stores data in structures, and how these can be extracted to individual vectors/scalars.</em></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span><span class="op">(</span><span class="st">'vectors-vs-structures'</span>, package <span class="op">=</span> <span class="st">'tagtools'</span><span class="op">)</span></code></pre></div>
<p><em>In <code>plots-and-cropping</code>, you’ll get to start visualizing some data of the types you’ve been learning to load.</em></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span><span class="op">(</span><span class="st">'plots-and-cropping'</span>, package <span class="op">=</span> <span class="st">'tagtools'</span><span class="op">)</span></code></pre></div>
<hr>
<p>Animaltags home pages: <a href="http://animaltags.org/" class="uri">http://animaltags.org/</a> (old), <a href="https://animaltags.netlify.app/" class="uri">https://animaltags.netlify.app/</a> (new), <a href="https://github.com/stacyderuiter/TagTools" class="uri">https://github.com/stacyderuiter/TagTools</a> (for latest beta source code)</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Stacy DeRuiter.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
