---
title: "load tag data"
author: "Vignette Author"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{load-tag-data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```
Welcome to this load tag data vignette! On behalf of the team behind tagtools, thanks for taking some time to get to know our package. We hope it is useful to you. 

In this vignette, you will gain confidence with using the tagtools to create and load netCDF files, including editing metadata. 

*Estimated time for this vignette: about 20 minutes.*

These vignettes assume that you have some basic experience working with R/Rstudio, and can execute provided code, making some user-specific changes along the way (e.g. to help R find a file you downloaded). We will provide you with quite a few lines. To boost your own learning, you would do well to try and write them before opening what we give, using this just to check your work.


# Loading an .nc File

##  Load the test data set
For this example, you will load in the data file from a CATs tag.The data file is already stored in a .nc file called 'cats_test_raw'. The function we will be using to achieve this is called,`load_nc()`.

This code below assumes the file is in your working directory. Again, you may have to change it to match your machine. (You may also need to escape slashes in the path specification (e.g., \\) depending on your platform.)

As a refresher, an easy way to check your current working directory is the command `getwd()`. When you run this (with parentheses), it should show you a path to the folder where you want the file `cats_test_raw.nc` to be located. You can also use `setwd(YourPathHere)` to set the working directory to where this file is already located. 

Another refresher -- if you get an error saying the function doesn't exist, make sure you have `tagtools` in your library! It won't be if you've restarted R recently. Running `library(tagtools)` does the trick as long as you've installed the package in the past. You should also run the following to make sure that all tagtools' dependencies are loaded: `library(CircStats);library(ggformula);library(graphics);library(hht);library(latex2exp);library(lubridate);library(magrittr);library(ncdf4);library(plotly);library(pracma);library(readr);library(rgl);library(signal);library(stats);library(utils);library(zoo);library(zoom)` to avoid confusing errors.

```{r,eval=FALSE}
MN <- load_nc('cats_test_raw')
```

This creates an animaltag list object `MN` in your workspace. You can view it in the Environment tab if working in RStudio, or in the command line type:

```{r,eval=FALSE}
names(MN)
str(MN, max.level = 1)
str(MN$A)
```

You should see that variables Acc, Gyr, Depth, Light, and info are contained within the list MN.

# Explore the test dataset

Now you can find out what each of the variables is by just typing their name followed by enter. For example, for info (tag-wide metadata), run

```{r,eval=FALSE}
MN$info
```

The info structure tells you where the data came from, when it was collected, on what animal, and with what type of tag. info is the general metadata store for a dataset. You can find out what is in a specific field in info, e.g., the to get the sensors\_list 

```{r,eval=FALSE}
MN$info$sensors_list
```

# Review

What have you learned so far? More important steps that will hopefully, as you're working with data more frequently, become healthy routines of consistent, rigorous documentation. 

Great work!